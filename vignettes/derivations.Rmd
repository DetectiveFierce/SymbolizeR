---
title: "Step-by-Step Derivations"
output: 
  rmarkdown::html_vignette:
    css: vignette-theme.css
    includes:
      after_body: vignette-extras.html
vignette: >
  %\VignetteIndexEntry{Step-by-Step Derivations}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = FALSE,
  comment = "#>"
)
```


```{r setup}
library(SymbolizeR)
```

SymbolizeR's derivation functions show **every step** of the calculation—invaluable for learning, teaching, and verification.

---

## `derive.E()` — Expectation Derivation

```{r derive-e}
derive.E(a * X + b)
```

### With Defined Distributions

```{r derive-e-defined}
clear.definitions()
define(X ~ Normal(mu, sigma))

derive.E(a * X + b)

clear.definitions()
```

### Linear Combinations

```{r derive-e-linear}
derive.E(X + Y + Z)
```

---

## `derive.Var()` — Variance Derivation

Shows complete variance calculation using $\text{Var}(X) = E[X^2] - E[X]^2$:

```{r derive-var}
derive.Var(X)
```

### Linear Transformations

See polynomial expansion for $\text{Var}(aX + b)$:

```{r derive-var-linear}
derive.Var(a * X + b)
```

### With Defined Distribution

```{r derive-var-defined}
clear.definitions()
define(X ~ Normal(mu, sigma))

derive.Var(X)

clear.definitions()
```

---

## `derive.Cov()` — Covariance Derivation

Shows covariance using $\text{Cov}(X, Y) = E[XY] - E[X]E[Y]$:

```{r derive-cov}
derive.Cov(X, Y)
```

---

## Understanding the Output

Each derivation returns a `derivation` object:

| Component | Description |
|-----------|-------------|
| `$input` | Original expression |
| `$steps` | List of intermediate steps |
| `$result` | Final simplified expression |

```{r structure}
d <- derive.E(X + Y)

d$result           # Final answer
length(d$steps)    # Number of steps
```

---

## Educational Use Cases

### Teaching Linearity

```{r teach-linearity}
derive.E(a * X + b)
```

### Variance Expansion

```{r teach-var}
derive.Var(a * X + b)
```

### Verifying Textbook Formulas

```{r verify}
clear.definitions()
define(X ~ Poisson(lambda))

# Verify Var(Poisson) = λ
derive.Var(X)

clear.definitions()
```

---

## Summary

| Function | Shows | Formula |
|----------|-------|---------|
| `derive.E(expr)` | Expectation steps | E[expr] |
| `derive.Var(expr)` | Variance steps | E[expr²] - E[expr]² |
| `derive.Cov(x, y)` | Covariance steps | E[xy] - E[x]E[y] |

These functions provide **transparency**—see exactly how SymbolizeR arrives at its answers.

<div class="vignette-nav">
  <a href="distributions.html" class="nav-item prev">
    <span class="nav-label">Previous</span>
    <span class="nav-title">2. Distributions</span>
  </a>
  <a href="calculus.html" class="nav-item next">
    <span class="nav-label">Next</span>
    <span class="nav-title">4. Calculus</span>
  </a>
</div>

